<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <p>今日の天気は{{ weather }}で、気温は{{ temp }}度です。</p>
        <button v-on:click="getData()">今日の東京の天気をAPIで取得！</button>

        <p>
            <a href="https://openweathermap.org/api">openweathermapから取得しています。</a>
        </p>
    </div>

    <div id="player"></div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                weather: 'xxxx',
                temp: 'yyyy'
            },

            methods: {
                getData: async function(){
                    const URL = `https://api.openweathermap.org/data/2.5/weather?id=1850147&units=metric&appid=2f2d285c836485617ce8cdf0c6ce8e50`;
                    const response = await axios.get(URL);
                    this.weather = response.data.weather[0].main;
                    this.temp = response.data.main.temp;
                    // console.log(response.data);
                },
            },

            // mounted: function(){

            // }
        })
    </script>

<script>
    // 2. This code loads the IFrame Player API code asynchronously.
    //以下ではscriptタグを生成・Youtube用のscriptファイルを読み込める様に編集、html上に設置ということをしています。
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 3. This function creates an <iframe> (and YouTube player)
    //これは②で作ったscriptタグの読み込みが終わったら自動で動くコードで、埋め込み用の動画を生成してくれます。
    //この時、どの動画をどんな画質で〜、、、という設定を書きます。そしてこの設定の通り後ほど埋め込み動画が生成されます。
    //で、これよく見ると新しく作ったオブジェクトが「player」という変数に入ってます。
    //    after the API code downloads.
    var player;
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '360',
        width: '640',
        videoId: 'M7lc1UVf-VE',
        events: {
          'onReady': onPlayerReady,
        }
      });
    }

    // 4. The API will call this function when the video player is ready.
    //これは動画プレイヤーが再生可能状態になったら、それがトリガーになって動くというfunctionです。
    //この中に書いてある「event.target.playVideo()」に注目
    //これを上で定義した「player」に対して、player.playVideo()という使い方をすると、playerで示された動画オブジェクトに対して再生や停止の命令を出す事が出来ます。
    //つまり、当初言っていたような事がしたい場合は独自の条件トリガーを作り、その中で「再生用メソッド等」を展開すればいいだけなのです。
    function onPlayerReady(event) {
      event.target.playVideo();
    }
  </script>
</body>
</html>
